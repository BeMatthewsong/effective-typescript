# [아이템 21] 타입 넓히기

> - 타입스크립트가 "넓히기"를 통해 타입을 추론하는 방식을 이해해야 한다
> - 타입스크립트의 기본 동작을 재정의하여 타입 추론의 강도를 직접 제어할 수 있다.

## 타입 넓히기란?

타입스크립트가 코드를 체크하는 시점에 변수는 **가능한 값들의 집합**인 타입을 가지게 된다. 타입스크립트는 변수의 타입을 추론할 떄 명확성과 유연성 사이의 균형을 유지하려고 한다. 이러한 추론의 과정을 타입스크립트에서는 **넓히기**라고 한다.

```ts
let x = 1; // 타입: number

let mixed = ['x', 1]; // 타입: (string | number)[]
```

## 타입 넓히기를 제어하는 법

### const 사용하기

`const`로 값을 선언하면 변수가 재할당 될 수 없기에 더 좁은 타입으로 추론할 수 있게 된다.

```ts
const x = 1; // 타입: 1
```

그러나 `const`는 배열과 객체에서 같은 문제를 보여준다.

```ts
const mixed = ['x', 1]; // 타입: (string | number)[]

const mixed2 = {
  a: 1,
}; // 타입 { a: number }
```

이러한 문제들을 해결하기 위해서는 아래와 같은 방법들로 타입 추론의 강도를 제어해야 한다.

### 명시적 타입 구문 제공

```ts
const mixed2: { x: 1 } = {
  x: 1,
}; // 타입 { a: 1 }
```

### const 단언문 사용

`const` 단언문을 사용하여 촤대한 좁은 타입으로 추론하도록 할 수 있다.
이때 `const` 단언문은 일반적인 `let`이나 `const`와 완전히 다른 타입 공간의 기법이므로 혼동해서는 안된다.

```ts
const v1 = {
  x: 1,
  y: 2,
}; // 타입: { x: number; y: number; }

const v2 = {
  x: 1 as const,
  y: 2,
}; // 타입: { x: 1; y: number; }

const v3 = {
  x: 1,
  y: 2,
} as const; // 타입: { readonly x: 1; readonly y: 2; }
```
