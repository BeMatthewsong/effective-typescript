# [아이템 57] 소스맵을 사용하여 타입스크립트 디버깅하기

## ⭐ 요약
- 원본 코드가 아닌 변환된 자바스크립트 코드를 디버깅하지 말자.
- 소스맵을 사용해서 런타임에 타입스크립트 코드를 디버깅하자.
- 소스맵이 최종적으로 변환된 코드에 완전히 매핑되었는지 확인하자.
- 소스맵에 원본 코드가 그대로 포함되도록 설정되어 있을 수 있으니 중요한 정보를 공개되지 않도록 설정을 확인하자.

## 소스맵이란?
원래의 TypeScript 소스와 실행되는 JavaScript 사이의 매핑 정보를 가지고 있는 파일을 소스 맵(source map)이라 한다. 주로 디버깅하기 위해 사용된다.

## 소스맵이 필요한 이유
타입스크립트로 작성된 코드는 브라우저에서 직접 실행되기 전에 JavaScript로 변환된다.
> 디버깅 과정에서 코드가 한 줄로 압축되었고 변수 이름도 변경이 되엇 문제가 발생할 때 원인을 정확하게 파악하기 어렵다.

이 과정에서 발생하는 오류를 디버깅하기 위해서는 원본 타입스크립트 파일 대신 변환된 JavaScript 파일을 보는 것보다는 
**타입스크립트 소스 맵**을 사용하여 원본 코드와 연결된 상태에서 디버깅하는 것이 더 용이하다다.
<br/>
다시 말해, 변환된 자바스크립트 파일보다는 타입스크립트 원본을 볼 수 있게 소스맵을 사용하자. 

## 소스맵을 설정하는 방법
```ts
// tsconfig.json
{
  "compileOptions":{
    "sourceMap" : true
  }
}
```
이렇게 설정 후 컴파일하면 .ts파일에 대해서 `.js`와 `.js.map` 두 개의 파일이 생성된다.
소스맵이 .js 파일과 같이 있으면 브라우저의 디버거에서 새로운 _index.ts_ 파일이 나타난다.

## 소스맵을 사용할 때 주의할 점
상용(production) 환경에 소스맵이 유출되고 있는지 확인해야 한다. <br/>
디버거를 열지 않는 이상은 소스맵이 로드되지 않으므로 실제 사용자에게 성능 저하는 발생하지 않지만, <br/> 
소스맵에 원본 코드의 인라인 복사본이 포함되어 있다면 공개해선 안될 내용이 들어 있을 수 있다.

##### 참고 링크

[소스 맵의 동작 원리](https://yozm.wishket.com/magazine/detail/2082/)
