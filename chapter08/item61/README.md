# [아이템 61] 의존성 관계에 따라 모듈 단위로 전환하기
요약
- 의존성이 가장 낮은 단계부터 모듈 단위로 마이그레이션을 진행하자.
- 주로 유틸리티 모듈이 의존성이 가장 낮다.
- 마이그레이션을 진행하면서 잘못된 설계를 바꾸려 하지 마라.
- 마이그레이션 먼저, 리팩토링은 To-do List에 추가하고, 마이그레이션 이후에 진행하기.

## 프로젝트의 의존성 관계를 나타내기
- madge + graphviz 라이브러리를 이용하면 프로젝트를 모듈 단위로 의존성 파악을 할 수 있음.
![image](https://github.com/code-itch/effective-typescript/assets/78120157/5fd20df0-e95c-4a21-bf00-58aa0b598e6a)

## 파악한 의존성을 기반으로, 마이그레이션 선순위 정하기
- 의존성의 가장 최하단, 그리고 순환 의존성을 가질수록 마이그레이션의 선순위이다.
- 아래의 예시에서는 hooks/useAuth.js 가 가장 선순위이다.
  ![image](https://github.com/code-itch/effective-typescript/assets/78120157/d88b92b7-c04b-4e44-8239-53cb0d21b964)

## JS -> TS 중 잘못된 설계가 있어도 마이그레이션 먼저 진행하기
- 왜? : 리팩토링을 진행하면서 추가적으로 타입설계가 바뀌게 되어 의존성이 있는 타 모듈에 영향을 주게 된다.
- 따라서, 마이그레이션 진행 중의 리팩토링은 타입 구문의 양을 기하급수적으로 늘릴 수 있고, 잘못된 타입 설계를 찾기 어렵게 만든다.

## 코드작성기에서 지원해주는 quick fix 이용하기
- 선언되지 않은 클래스 멤버의 경우 quick fix에서 빠른 수정(Ctrl + .)이 가능하다.
  ![image](https://github.com/code-itch/effective-typescript/assets/78120157/88fb790f-bbeb-4bb0-a2e5-076aac8cef86)

- JSDOC과 @ts-check를 이용한 JS 타입체크의 경우에도 quick fix를 통해 빠른 수정이 가능하다.

## 모듈의 마이그레이션이 끝나면, 테스트 코드를 마이그레이션 하기
- 모듈 먼저, 테스트 나중
- 모듈을 먼저 마이그레이션하고 테스트 코드를 실행하여 런타임 에러를 확인해 볼 수도 있다.
